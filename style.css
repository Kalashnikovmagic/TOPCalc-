:root{
  --bg:#000;
  --digit:#2c2c2e;
  --func:#5c5c5f;
  --op:#ff9f0a;
  --text:#fff;
  --gap: 10px;
  --btnSize: min(122px, calc((100vw - (var(--gap) * 5) - 34px) / 4));
  --radius: 999px;
  --shadow: inset 0 1px 0 rgba(255,255,255,.10);
}

*{box-sizing:border-box; -webkit-tap-highlight-color:transparent;}
html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","SF Pro Text",system-ui,Segoe UI,Roboto,Arial,sans-serif;overflow:hidden;touch-action:manipulation;user-select:none;}

body{display:flex;justify-content:center;align-items:flex-end;transform: scale(1.03);transform-origin: top center;padding-bottom: 12px;}

.app{width:100%;max-width:520px;height:100%;padding:env(safe-area-inset-top) 12px env(safe-area-inset-bottom) 12px;display:flex;flex-direction:column;justify-content:flex-end;gap: 18px;}

.display{width:100%;height:140px;display:flex;justify-content:flex-end;align-items:flex-end;padding:0 6px;font-size:62px;font-weight:500;letter-spacing:-1px;line-height:1;white-space:nowrap;overflow-x:auto;-webkit-overflow-scrolling:touch;}

.keys{width:100%;display:grid;grid-template-columns:repeat(4,var(--btnSize));grid-auto-rows:var(--btnSize);gap:var(--gap);justify-content:center;padding-bottom:6px;}

.btn{width:var(--btnSize);height:var(--btnSize);border-radius:var(--radius);border:none;outline:none;display:flex;align-items:center;justify-content:center;color:var(--text);font-size:34px;font-weight:400;box-shadow:var(--shadow);cursor:pointer;transition: transform 0.2s cubic-bezier(0.34,1.56,0.64,1), filter 0.2s ease;}
.btn:active{filter:brightness(1.3);transform:scale(1.25);}
.btn.bounce{animation:bounceRelease 0.25s forwards;}
@keyframes bounceRelease{0%{transform:scale(1.25);}50%{transform:scale(0.95);}100%{transform:scale(1);}}

.digit{background: var(--digit);}
.func{background: var(--func);}
.op{background: var(--op);color:#fff;}
.pm{ font-size: 32px;}
.comma{ font-size: 44px;}
.backspace svg{width:34px;height:34px;display:block;transform:translateX(-2px);}

/* MENU FORCE */
.menu{position:fixed;inset:0;background:rgba(0,0,0,0.95);display:flex;align-items:center;justify-content:center;z-index:999;display:none;}
.menuCard{width:100%;max-width:420px;background:rgba(28,28,30,.95);border-radius:16px;padding:20px;display:flex;flex-direction:column;gap:12px;}
.menuCard input{flex:1;height:44px;border-radius:12px;border:1px solid rgba(255,255,255,.1);background:rgba(255,255,255,.05);color:#fff;padding:0 12px;font-size:18px;text-align:center;outline:none;}
.menuBtns{display:flex;gap:12px;}
.menuBtn{flex:1;height:44px;border-radius:14px;font-size:16px;font-weight:600;border:none;cursor:pointer;user-select:none;transition: transform 0.2s cubic-bezier(0.34,1.56,0.64,1), filter 0.2s ease;}
.menuBtn:active{transform:scale(1.1);filter:brightness(1.2);}
.resetBtn{background:#5c5c5f;color:#fff;}
.saveBtn{background:#ff9f0a;color:#fff;}
